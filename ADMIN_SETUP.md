# Налаштування Адміністратора

## Крок 1: Оновлення бази даних

Застосуйте нову міграцію для додавання ролей:

```bash
npm run prisma:migrate
```

Коли запитає назву міграції, введіть: `add_user_roles`

## Крок 2: Створення адміністратора

Запустіть seed скрипт для створення адміна:

```bash
npm run prisma:seed
```

Це створить користувача з такими даними:
- **Email:** admin@school.com
- **Username:** admin
- **Password:** admin1236
- **Role:** ADMIN

## Крок 3: Вхід як адміністратор

1. Відкрийте додаток
2. На екрані входу введіть:
   - Email: `admin` (або `admin@school.com`)
   - Пароль: `admin1236`
3. Після входу ви автоматично потрапите в адмін-панель

## Можливості адміністратора

### Адмін-панель включає:

1. **Статистика:**
   - Загальна кількість постів
   - Загальна кількість коментарів
   - Загальна кількість лайків

2. **Управління постами:**
   - Перегляд усіх постів від усіх користувачів
   - Видалення будь-якого поста (червона кнопка корзини)
   - Перегляд фото та опитувань

3. **Управління коментарями:**
   - Перегляд усіх коментарів під кожним постом
   - Видалення будь-якого коментаря (червона кнопка корзини)

4. **Вихід:**
   - Кнопка "Вийти" в шапці панелі

## Backend зміни

### Оновлена схема Prisma

```prisma
enum UserRole {
  USER
  ADMIN
}

model User {
  role UserRole @default(USER)
  // ... інші поля
}
```

### Логіка видалення

Тепер видаляти пости та коментарі можуть:
- Автор контенту
- Користувач з роллю ADMIN

### API ендпоінти

- `DELETE /api/posts/:id` - видалення поста (автор або адмін)
- `DELETE /api/comments/:id` - видалення коментаря (автор або адмін)

## Перевірка ролі

У коді можна перевірити роль користувача:

```typescript
const { isAdmin } = useAuthStore();

if (isAdmin()) {
  // Показати адмін-панель
}
```

## Безпека

⚠️ **ВАЖЛИВО:** У production середовищі:
1. Змініть пароль адміністратора
2. Використовуйте змінні оточення для JWT_SECRET
3. Додайте rate limiting для API
4. Використовуйте HTTPS

## Скидання адміністратора

Якщо потрібно створити нового адміна або змінити пароль:

```bash
# Видалити старого адміна
npx prisma studio
# Знайдіть користувача admin і видаліть його

# Створити нового
npm run prisma:seed
```

Або через Prisma Studio:
```bash
npx prisma studio
```
Відкриється GUI де можна редагувати користувачів вручну.
